---
layout: post
subclass: post
title: "파이썬 프로그래밍 입문(10) 디버깅"
date: 2019-05-17 00:00:10
tags: [python-programming, debugging]
excerpt: "파이썬 프로그래밍 입문, 디버깅에 대한 설명입니다."
disqus: True
---

## 디버깅

디버깅은 '프로그램이 의도한 대로 실행되지 않는다는 것을 알고 수정하는 과정'을 말합니다.

- 디버깅을 잘하려면?
- 더 나은 디버깅을 위해 실천에 옮길 수 있는 방법

## 디버깅을 잘 하려면?

저 역시 주니어 개발자이고 디버깅에 대해서는 갈 길이 멉니다. 대신 다양한 서적에서 언급하고 있는 마음자세와 팁을 소개하도록 하겠습니다.

1. 프로그램을 쉽게 테스트하고 디버깅할 수 있도록 설계하자.

첫 번째 팁은 '애초에 잘 짜자'입니다. 다음은 John V.Guttag 저자의 '파이썬 프로그래밍'이라는 도서에 언급되는 내용입니다.

"훌륭한 프로그래머는 프로그램을 쉽게 테스트하고 디버깅할 수 있도록 설계합니다. 이렇게 하는 방법의 핵심은 프로그램을 여러 컴포넌트들로 나누어서 다른 컴포넌트와 독립적으로 구현하고 검사하며 디버깅할 수 있도록 하는 것입니다."

저자가 언급하는 방법인 모듈화는 큰 프로그램을 여러 개의 모듈 즉 클래스 또는 함수로 나누어서 작성하는 것입니다. 클래스는 아직 배우지 않았지만 큰 프로그램을 하나의 역할을 하는 여러 개의 함수로 작성한다면 어떤 함수에서 문제가 생겼는데 쉽게 파악하실 수 있으실 것입니다.

2. 프로그램에 문제가 생기면 내 잘못이라고 생각하고 시작하자.

'버그'라는 단어의 유래는 컴퓨터 안에 큰 나방이 들어가 회로 기능 장애를 일으키면서라고 합니다. 그 때 이후로는 문제가 생기면 사람들이 버그(벌레) 때문이라고 탓했다고 합니다. 그러면서 '버그'라는 단어가 유래되었다고 합니다.

다음은 "코드 컴플리트"이라는 책에 언급된 내용입니다.

"프로그램에 문제가 있다면 그것은 작성자의 잘못이지 컴퓨터나 컴파일러의 잘못이 아니다. 프로그램은 매번 다르게 행동하지 않으며 스스로 코딩하지도 않는다. 작성한 사람이 책임져야 한다.

오류가 처음에는 자신의 잘못이 아닌 것처럼 보여도 자신의 잘못일 거라고 가정하는 것이 매우 중요하다. 그러한 가정이 디버깅에 도움이 된다.

결함을 찾고 있을 때는 코드 내에서 결함을 발견하기가 어렵다. 자신의 코드에 오류가 없다고 가정할 때는 더욱 그렇다."

당연한 이야기라고 생각하실 수 있지만 저는 디버깅하다 보면 뭔가 다른 문제가 있는 것 같다는 생각이 든 적이 많았습니다. 부끄러운 순간들이지만 내 코드에 문제가 있다는 생각을 하고 디버깅에 임하는 것이 필요하다는 생각이 듭니다.

3. 버그 중 명시적이고 지속적인 버그를 일으키자.

버그가 없으면 가장 좋겠지만 버그가 일어난다면 명시적이고 지속적인 버그가 가장 좋습니다.
명시적인 버그가 좋다는 말은 문제 없이 결과를 출력하지만 예상과 전혀 다른 결과를 내기보다는 그 전에 버그를 출력하는 것이 낫다는 것입니다. 또, 지속적인 버그가 더욱 좋다는 말은 어떨 때는 일어났다가 어떨 때는 생기지 않는 버그는 문제를 추적하기 어렵기 때문에 지속적인 버그가 더욱 낫다는 말입니다.

'명시적이고 지속적인 버그를 일으키려면 어떻게 해야할까?'라는 생각이 들 수 있는데 가정 설정문인 assert문과 같은 도구를 활용하는 것입니다.

```python
def divide(a, b):
    assert b > 0, 'divider should be bigger than 0'
    return a / b

divide(10, 0)
```

```
Output

Traceback (most recent call last):
  File "assert_test.py", line 5, in <module>
    divide(10, 0)
  File "assert_test.py", line 2, in divide_by
    assert b > 0, 'divider should be bigger than 0'
AssertionError: divider should be bigger than 0
```

assert문은 아래와 같은 형태입니다. 조건을 만족시키면 문제 없이 진행되지만 assert문을 만났을 때 조건을 만족하지 못하면 바로 AssertionError가 발생합니다.

```
assert <condition>, <error message>
```

위의 경우 나눗셈을 할 때 나누는 수는 0이 되어서는 안 되기 때문에 assert문으로 먼저 가정을 설정해주는 것입니다.

## 더 나은 디버깅을 위해 실천에 옮길 수 있는 방법

1. 가설 세우고 검증하기

다음 내용 역시 "코드 컴플리트"이라는 도서에서 언급된 내용입니다.

"숙련된 개발자와 경험이 없는 개발자를 대상으로 한 연구에서 숙련된 개발자와 경험이 없는 개발자가 같은 결함을 발견하는 데 걸리는 시간이 대략 20배 차이가 있음을 발견했다.

살인 미스터리를 해결해달라는 요청을 받았을 때, 마을 전체를 집집마다 방문하여 모든 사람의 10월 17일 밤 알리바이를 조사하는 것과 몇 가지 단서를 찾아내 살인자의 신원을 추론하는 것 중 어느 것이 더 흥미로운가?

비효과적인 개발자보다 20배나 빨리 디버깅하는 효과적인 개발자는 프로그램을 수정할 방법을 무작위로 추측하지 않는다."

무작정 이것저것 해보는 방법은 좋지 않습니다. 오류 메세지를 읽고 또는 현재의 동작을 파악하고 가설을 세워야 합니다. 예를 들어 프로그램을 작성했는데 프로그램이 종료되지 않는 상황이라고 가정해보겠습니다. 그렇다면 다음과 같이 가설을 세워볼 수 있을 것입니다.

'while문에서의 종료 조건이 잘못 되었기 때문에 프로그램이 종료하지 않는다.'

이제 가설을 검증해야 합니다. 예를 들면 while문의 앞뒤에 print문을 작성하고 두 print문의 메세지가 모두 출력된다면 가설이 틀렸다고 판단할 수 있을 것입니다.

가설을 세우고 그 가설을 어떻게 확인할 수 있을지 생각한 다음 문제의 범위를 좁혀나가다 보면 문제를 해결하실 수 있을 것입니다.

2. 기록 남기기

디버깅을 하다 보면 이것저것해보다가 이미 시도했었던 것을 잊어버리고 다시 시도하는 경우도 생기곤 합니다. 간단한 문제라면 모르겠지만 길어질 것 같다면 오히려 기록을 통해 문제의 범위를 좁혀나가는 것이 필요합니다.

예를 들면 다음과 같은 방식입니다.

가설1. ~

입력: [ A , B , C ]

예상했던 출력: D

반환된 출력: E

3. 다른 사람에게 설명해보기

문제를 다른 사람에게 설명해보는 것도 좋은 방법입니다. 다른 사람에게 문제를 설명하는 과정에서 놓치고 있던 부분이 생각나는 경우도 많습니다. 어떤 영역의 코드에는 왜 버그가 있을 수 없는지를 설명해보는 것도 좋은 방법입니다.

4. '왜 안 되지?'보다는 '왜 지금 같은 결과가 나왔지?'라고 스스로 묻기

'왜 안 되지'라고 스스로 물었을 때 문제를 찾기는 쉽지 않습니다. 왜 지금 같은 결과가 나왔는지 파악하기 위해 문제를 추적하면 조금 더 쉽게 문제를 찾을 수 있을 것입니다.

5. 일단 접고 나중에 해보기

디버깅을 하다 보면 과몰입으로 오히려 하나의 가설에 매이게 되는 등 쉽게 문제를 찾을 수 없을 때가 있습니다. 이 때는 잠깐 눈을 돌리는 것도 방법입니다.
