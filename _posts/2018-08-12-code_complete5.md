---
layout: post
subclass: post
title: "Code Complete 정리(5)"
date: 2018-08-12 00:00:05
tags: [programming, must-read]
excerpt: "programming"
disqus: True
---

# CODE COMPLETE 5 부 코드 향상

## 22 장 개발자 테스트

### 1. 테스트의 목표는 오류를 찾는 것이다.

성공적인 테스트는 소프트웨어를 부수는 것이다. 어떤 개발자들은 "테스트"와 "디버깅"을 구분 없이 사용하지만, 신중한 개발자는 두 활동을 구분한다. 테스트는 오류를 발견하기 위한 수단이다. 디버깅은 이미 발견된 오류의 원인을 진단하고 수정하는 수단이다.

### 2. 테스트 케이스를 먼저 작성하는 것이 코드에 결함이 삽입되는 시간과 결함이 발견되고 제거되는 시간의 차이를 최소화할 것이다.

### 3. 개발자 테스트의 한계를 주의한다.

1.  개발자 테스트는 "깨끗한 테스트"가 되기 쉽다.
2.  개발자 테스트는 테스트 커버리지를 낙관적으로 바라보는 경향이 있다.
3.  개발자 테스트는 좀 더 정교한 테스트 커버리지를 건너뛰는 경향이 있다.

### 4. 좋은 테스트 케이스는 가능한 입력 데이터의 넓은 부분을 다룬다.

### 5. 테스트가 가장 유용한 영역 중 하나는 경계 조건, 즉 하나 차이로 인한 오류다.(경계 분석)

예를 들어 >을 써야 할 때 >= 라고 쓰는 것이 가장 흔한 실수다.

## 23 장 디버깅

디버깅은 오류의 근본적인 원인을 규명하여 수정하는 과정이다.

### 1. 디버깅에 대한 악마의 지침

1-1) 추측으로 결함을 찾아라

결함을 찾기 위해서 프로그램 전체에 마구잡이로 출력 명령문을 뿌린다. 출력 명령문으로 결함을 찾을 수 없을 때는 무언가가 작동하는 것처럼 보일 때까지 프로그램을 계속해서 변경한다. 이때 프로그램의 원본을 백업하지도, 변경 사항에 대해 기록하지도 않는다.

1-2) 문제를 이해하는 데 시간을 쓰지 말아라.

1-3) 가장 명백한 수정으로 오류를 수정해라.

### 2. 수정하기 전에 문제를 이해하라.

### 3. 문제만 이해하지 말고 프로그램을 이해하라.

### 4. 원본 소스코드를 저장하라.

### 5. 증상이 아니라 문제를 해결하라.

### 6. 한 번에 한 가지만 변경하라.

"살인 미스터리를 해결해달라는 요청을 받았다고 가정해보자. 마을 전체를 집집마다 방문하여 모든 사람의 10 월 17 일 밤 알리바이를 조사하는 것과 몇 가지 단서를 찾아내 살인자의 신원을 추론하는 것 중 어느 것이 더 흥미로운가?"

"더욱이 비효과적인 개발자보다 20 배나 빨리 디버깅하는 효과적인 개발자는 프로그램을 수정할 방법을 무작위로 추측하지 않는다."

## 24 장 리팩토링

### 1. 리팩토링을 하는 이유

1-1) 코드가 중복되어 있다.
1-2) 루틴이 너무 길다.
1-3) 루프가 너무 길거나 중첩되어 있다.
1-4) 클래스의 응집력이 약하다.
1-5) 클래스 인터페이스가 일관된 추상화 수준을 제공하지 않는다.
1-6) 매개변수가 너무 많다.
1-7) 함께 사용되는 연관된 데이터 항목이 클래스로 구성되지 않았다.
1-8) 클래스가 많은 일을 수행하지 않는다.
1-9) 전역변수를 사용한다.
1-10) 프로그램이 언젠가 필요할 것 같은 코드를 포함하고 있다.

### 2. 리팩토링을 시작하기 전에 코드를 저장한다.

### 3. 리팩토링은 한 번에 하나만 수행한다.

### 4. 리팩토링은 프로그램의 행위에 영향을 주지 않으면서 작동하는 코드를 변경하는 것을 가리킨다.

## 25 장 코드 튜닝 전략

### 1. 성능에 대해서 말할 때 "아마"라는 말은 통하지 않는다.

### 2. 코드를 작성하면서 최적화해야 한다? 거짓!

이러한 접근방법은 개발자들이 세부적인 최적화를 하느라 너무 바빠서 중요한 전역적인 최적화를 무시하는, 나무만 보고 숲은 보지 못하는 상황을 만든다.

### 3. 제대로 완성되었을 때 성능을 검사하라. 프로그램을 못 쓰게 하고 싶다면 빠르고 작게 만들어라. 최적화가 필요하다는 것을 알게 될 때까지 최적화하지 마라.

## 26 장 코드 튜닝 기법

### 1. 답을 알고 있을 때는 테스트를 중단하라

### 2. 반복문은 여러 번 수행되기 때문에 프로그램에서 문제가 발생하는 영역이 반복문인 경우가 많다.

2-1) 스위칭(Switching) 해제

스위칭은 반복문이 실행될 때마다 반복문 내에서 무언가를 결정하는 것을 가리킨다. 반복문이 실행되는 동안 그 결정이 변하지 않는다면 반복문 밖에서 결정함으로써 불필요하게 스위칭하지 않게 할 수 있다. 일반적으로 이 기법을 사용하려면 반복문을 뒤집어서 반복문 내부에 조건문을 입력하는 대신 조건문 내부에 반복문을 입력해야 한다.

2-2) 결합

같은 요소의 집합을 다루는 두 개의 반복문을 결합하는 것을 말한다. 두 개의 반복문을 하나로 줄임으로써 반복문의 오버헤드를 줄이는 이득을 볼 수 있다.

2-3) 반복문 내부 작업 최소화

효과적인 반복문을 작성하려면 반복문 내부에서 처리되는 작업을 최소화해야 한다. 반복문 외부에 있는 명령문이나 그 일부를 평가하여 반복문 내부에서 그 결과만 사용하게 할 수 있다면 그렇게 한다. 좋은 프로그래밍 습관일 뿐만 아니라 때에 따라 가독성도 향상시켜준다.

2-4) 가장 빈번하게 실행되는 반복문을 안쪽에 작성

### 3. 가능한 한 가장 적은 차수의 배열을 사용하라.

다차원 배열은 느리다는 게 일반적인 통념이다.

### 4. 배열에 대한 참조를 최소화하라.
